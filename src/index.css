@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

@layer base {
:root {
  --background: 210 20% 98%; /* #F8FAFC */
  --foreground: 222 84% 4.9%;
  --card: 0 0% 100%; /* #FFFFFF */
  --card-foreground: 222 84% 4.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 222 84% 4.9%;
  
  /* Balloon theme colors - Ciel (primary) */
  --primary: 213 97% 68%; /* #60A5FA */
  --primary-foreground: 222 84% 4.9%;
  
  /* Balloon theme - Menthe (success) */
  --secondary: 213 97% 68%; /* Same as primary for consistency */
  --secondary-foreground: 222 84% 4.9%;
  
  /* Balloon theme - Corail (accent) */
  --accent: 350 89% 71%; /* #FB7185 */
  --accent-foreground: 222 84% 4.9%;
  
  /* Success colors - Vert menthe */
  --success: 158 64% 52%; /* #34D399 */
  --success-foreground: 222 84% 4.9%;
  
  /* Balloon theme - Jaune (highlight) */
  --highlight: 48 96% 56%; /* #FACC15 */
  --highlight-foreground: 222 84% 4.9%;
  
  /* Info kept for backward compatibility */
  --info: 213 97% 68%;
  --info-foreground: 222 84% 4.9%;
  
  /* Neutral colors */
  --muted: 220 14% 96%; /* #F5F5F5 */
  --muted-foreground: 215 16% 47%;
  --border: 220 13% 91%; /* #E5E7EB */
  --input: 220 13% 91%;
  --ring: 221 83% 53%;
  
  /* Secondary palette */
  --sage: 134 23% 70%; /* #A7C7A9 */
  --beige: 60 29% 96%; /* #F5F5DC */
  
  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 98%;
  
  --radius: 0.75rem;
  
  /* Balloon theme gradients */
  --gradient-hero: linear-gradient(90deg, hsl(213 97% 68%), hsl(158 64% 52%), hsl(350 89% 71%));
  --gradient-button: linear-gradient(135deg, hsl(213 97% 68%), hsl(350 89% 71%));
  --gradient-progress: linear-gradient(90deg, hsl(213 97% 68%), hsl(158 64% 52%));
  --gradient-card: linear-gradient(135deg, hsl(0 0% 100%), hsl(220 14% 98%));
  --gradient-success: linear-gradient(135deg, hsl(158 64% 52%), hsl(158 64% 62%));
  --gradient-sky-bg: linear-gradient(180deg, hsl(213 100% 97%), hsl(0 0% 100%));
  
  /* Balloon theme shadows - softer */
  --shadow-card: 0 2px 8px -2px hsl(213 97% 68% / 0.12);
  --shadow-vibrant: 0 6px 20px -6px hsl(213 97% 68% / 0.2);
  --shadow-success: 0 4px 12px -4px hsl(158 64% 52% / 0.25);
  --shadow-focus: 0 0 0 3px hsl(213 97% 68% / 0.15);
  --shadow-balloon: 0 4px 16px -4px hsl(213 97% 68% / 0.3);

  --chart-1: 20 91% 48%;
  --chart-2: 188 78% 41%;
  --chart-3: 271 91% 65%;
  --chart-4: 153 60% 53%;
  --chart-5: 134 23% 70%;

  --animation-duration: 300ms;

  --sidebar-background: 0 0% 98%;
  --sidebar-foreground: 240 5.3% 26.1%;
  --sidebar-primary: 240 5.9% 10%;
  --sidebar-primary-foreground: 0 0% 98%;
  --sidebar-accent: 240 4.8% 95.9%;
  --sidebar-accent-foreground: 240 5.9% 10%;
  --sidebar-border: 220 13% 91%;
  --sidebar-ring: 217.2 91.2% 59.8%;
}

.dark {
  --background: 222 84% 4.9%;
  --foreground: 210 40% 98%;
  --card: 222 84% 4.9%;
  --card-foreground: 210 40% 98%;
  --popover: 222 84% 4.9%;
  --popover-foreground: 210 40% 98%;
  
  --primary: 221 83% 63%;
  --primary-foreground: 222 84% 4.9%;
  --secondary: 271 91% 75%;
  --secondary-foreground: 222 84% 4.9%;
  --accent: 20 91% 58%;
  --accent-foreground: 222 84% 4.9%;
  --success: 153 60% 63%;
  --success-foreground: 222 84% 4.9%;
  --info: 188 78% 51%;
  --info-foreground: 222 84% 4.9%;
  
  --muted: 217 32.6% 17.5%;
  --muted-foreground: 215 20.2% 65.1%;
  --border: 217 32.6% 17.5%;
  --input: 217 32.6% 17.5%;
  --ring: 221 83% 63%;
  
  --sage: 134 23% 60%;
  --beige: 60 29% 86%;
  
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 210 40% 98%;
  
  --chart-1: 20 91% 58%;
  --chart-2: 188 78% 51%;
  --chart-3: 271 91% 75%;
  --chart-4: 153 60% 63%;
  --chart-5: 134 23% 60%;
  
  --sidebar-background: 240 5.9% 10%;
  --sidebar-foreground: 240 4.8% 95.9%;
  --sidebar-primary: 224.3 76.3% 48%;
  --sidebar-primary-foreground: 0 0% 100%;
  --sidebar-accent: 240 3.7% 15.9%;
  --sidebar-accent-foreground: 240 4.8% 95.9%;
  --sidebar-border: 240 3.7% 15.9%;
  --sidebar-ring: 217.2 91.2% 59.8%;
}
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
  }
  
  /* Prevent iOS zoom on input focus */
  input,
  textarea,
  select {
    font-size: 16px !important;
  }
  
  /* Touch targets should be at least 44x44px */
  button,
  a,
  [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }
}

@keyframes checkmark {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  50% {
    transform: scale(1.2);
    opacity: 1;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes taskComplete {
  0% {
    transform: scale(1) rotate(0deg);
  }
  25% {
    transform: scale(1.05) rotate(2deg);
  }
  50% {
    transform: scale(1.1) rotate(-2deg);
  }
  75% {
    transform: scale(1.05) rotate(1deg);
  }
  100% {
    transform: scale(1) rotate(0deg);
  }
}

@keyframes confettiExplosion {
  0% {
    transform: scale(1) rotate(0deg);
    box-shadow: 
      0 0 0 0 hsl(280 100% 70% / 0.8),
      0 0 0 0 hsl(25 100% 60% / 0.8),
      0 0 0 0 hsl(120 65% 50% / 0.8),
      0 0 0 0 hsl(320 85% 75% / 0.8);
  }
  25% {
    transform: scale(1.15) rotate(5deg);
    box-shadow: 
      10px -15px 0 5px hsl(280 100% 70% / 0.6),
      -12px -10px 0 3px hsl(25 100% 60% / 0.6),
      15px 8px 0 4px hsl(120 65% 50% / 0.6),
      -8px 12px 0 6px hsl(320 85% 75% / 0.6);
  }
  50% {
    transform: scale(1.25) rotate(-3deg);
    box-shadow: 
      20px -25px 0 8px hsl(280 100% 70% / 0.4),
      -22px -18px 0 6px hsl(25 100% 60% / 0.4),
      28px 15px 0 7px hsl(120 65% 50% / 0.4),
      -15px 20px 0 9px hsl(320 85% 75% / 0.4);
  }
  75% {
    transform: scale(1.1) rotate(2deg);
    box-shadow: 
      30px -35px 0 4px hsl(280 100% 70% / 0.2),
      -32px -28px 0 3px hsl(25 100% 60% / 0.2),
      38px 25px 0 5px hsl(120 65% 50% / 0.2),
      -25px 30px 0 6px hsl(320 85% 75% / 0.2);
  }
  100% {
    transform: scale(1) rotate(0deg);
    box-shadow: 
      40px -45px 0 0 hsl(280 100% 70% / 0),
      -42px -38px 0 0 hsl(25 100% 60% / 0),
      48px 35px 0 0 hsl(120 65% 50% / 0),
      -35px 40px 0 0 hsl(320 85% 75% / 0);
  }
}

@keyframes celebrationPulse {
  0%, 100% {
    background: linear-gradient(145deg, hsl(0 0% 100%), hsl(230 25% 98%));
  }
  20% {
    background: linear-gradient(145deg, hsl(280 100% 95%), hsl(320 85% 95%));
  }
  40% {
    background: linear-gradient(145deg, hsl(25 100% 95%), hsl(280 100% 95%));
  }
  60% {
    background: linear-gradient(145deg, hsl(120 65% 95%), hsl(25 100% 95%));
  }
  80% {
    background: linear-gradient(145deg, hsl(320 85% 95%), hsl(120 65% 95%));
  }
}

.animate-checkmark {
  animation: checkmark 0.5s ease-in-out;
}

.animate-task-complete {
  animation: taskComplete 0.6s ease-in-out;
}

.animate-confetti-explosion {
  animation: confettiExplosion 1.2s ease-out, celebrationPulse 1.2s ease-out;
  position: relative;
  overflow: visible;
}

.celebration-text {
  animation: checkmark 0.8s ease-out 0.3s both;
}

/* Balloon theme - Global styles */
@layer components {
  .balloon-chip {
    @apply relative rounded-full px-3 py-1.5 text-sm font-medium border-2 transition-all duration-200;
  }
  
  .balloon-chip::after {
    content: '';
    position: absolute;
    bottom: -6px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 4px solid transparent;
    border-right: 4px solid transparent;
    border-top: 6px solid currentColor;
    opacity: 0.7;
  }

  .balloon-chip-low {
    @apply bg-muted border-muted-foreground/20 text-muted-foreground;
  }

  .balloon-chip-medium {
    @apply bg-primary/10 border-primary/40 text-primary;
  }

  .balloon-chip-high {
    @apply bg-accent/10 border-accent/40 text-accent;
  }
}

/* Balloon rise animation */
@keyframes balloonRise {
  0% {
    transform: translateY(0) rotate(0deg);
    opacity: 1;
  }
  50% {
    transform: translateY(-30vh) rotate(10deg) translateX(15px);
    opacity: 0.8;
  }
  100% {
    transform: translateY(-60vh) rotate(-5deg) translateX(-10px);
    opacity: 0;
  }
}

.balloon-rise {
  animation: balloonRise 550ms ease-out forwards;
}

/* Hover inflation effect */
@media (prefers-reduced-motion: no-preference) {
  .balloon-hover {
    @apply transition-transform duration-200;
  }
  
  .balloon-hover:hover {
    @apply scale-105 shadow-md;
  }
}
